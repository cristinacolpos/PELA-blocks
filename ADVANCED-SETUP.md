# PELA Blocks

See also the [Slicer Recommendations](SLICER_RECOMMENDATIONS) printing information.

## Advanced Setup

Instructions are for Windows, however Linux and OSX are esssentially the same but scripts to automate batch building are not provided.

## Backing Up Your Calibration Files

If you later update the PELA-blocks project to a newer version, you risk overwirting and loosing your calibration customizations. The simplest solution is to create a backup copy those settings.

1. `cd PELA-blocks`
1. `copy PELA-parameters.scad ..\PELA-parameters-backup.scad`
1. `copy PELA-print-parameters.scad ..\PELA-print-parameters-backup.scad`

## Sparce Checkout

This saves time and bandwidth when the models are updated on the server.

1. `git config core.sparcecheckout true`
1. Create `.git\info\sparce-checkout` with the following 3 lines:

    `/*` 

    `*.stl` 

    `*.png`

1. From now on `git pull` will be faster because it will skip old versions of generated files.

## Compress and clean STL files from the command line

OpenSCAD exports large text files which 2x larger than binary STL and may contain mistakes. Usually your slicer can handle this just fine, but you may want to enable options like Cura "Extensive Stitiching". Cleaning and compressing the STL before slicing is optional but may help if you Slicer complains about the file. A quick solution is to load and re-save the file generated by OpenSCAD in [Windows 3D Builder](https://www.microsoft.com/store/apps/9wzdncrfj3t6) (Open the file, Click YES to fix, then CTRL S to save over the original file), [Meshlab](http://www.meshlab.net/) or [Meshmixer](http://www.meshmixer.com/download.html).

Follow the instructions below if you want to this from the command line or have it done for you automatically when rebuilding the models from the command line.

1. **[Calibrate](README.md#calibrate)** the PELA Block models for your printer before making and clearning any models
1. Install **[Meshlab](http://www.meshlab.net/)**
1. Add it to your path: `C:\Program Files\VCG\MeshLab`
1. To make and clean a single block: `PELA-block.ps1 -stl -clean l=4 w=2 h=1`
1. To make and clean a single block with technic holes: `PELA-technic-block.ps1 -stl -clean l=2 w=2 h=2`
1. To batch make and clean all models with current material calibration values: `make.ps1 -stl -clean`
